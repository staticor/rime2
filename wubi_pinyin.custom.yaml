patch:
  schema: 
    dependencies:
    - pinyin_simp
    - my_symbols
    - emoji
  switches:
    - name: ascii_mode
      reset: 0
      states: [ 中文, 西文 ]
    - name: full_shape
      states: [ 半角, 全角 ]
    - name: extended_charset
      states: [ 常用, 增廣 ]
    - name: ascii_punct
      states: [ 。，, ．， ]
  
  engine:
    processors:
      - ascii_composer
      - recognizer
      - key_binder
      - speller
      - punctuator
      - selector
      - navigator
      - express_editor
    segmentors:
      - ascii_segmentor
      - matcher
      - affix_segmentor@myemoji
      - abc_segmentor
      - punct_segmentor
      - fallback_segmentor
    translators:
      - punct_translator
      - reverse_lookup_translator
      - table_translator
      - script_translator@myemoji
  
  speller:
    delimiter: " ;'"
    #max_code_length: 4  # 四碼頂字上屏
  
  translator:
    dictionary: wubi86
    prism: wubi_pinyin
    enable_charset_filter: true
    enable_sentence: true
    enable_encoder: true
    encode_commit_history: true
    max_phrase_length: 4
    disable_user_dict_for_patterns:
      - "^z.*$"
  
  abc_segmentor:
    extra_tags:
      - reverse_lookup
  myemoji:
    # script_translator@emoji
    dictionary: emoji
    preedit_format:
      - "xform/^([a-z]*)$/【Emoji】$1/"
    # affix_segmentor@myemoji
    tag: myemoji
    prefix: '`'
    tips: 〔Emoji〕
    closing_tips: 〔Emoji〕 
  reverse_lookup:
    dictionary: pinyin_simp
    prefix: "`"
    suffix: "'"
    tips: 〔拼音〕
    preedit_format:
      - xform/([nl])v/$1ü/
      - xform/([nl])ue/$1üe/
      - xform/([jqxy])v/$1u/
  
  punctuator:
    import_preset: my_symbols
  
  key_binder:
    import_preset: default
  
  recognizer:
    import_preset: default
    patterns:
      myemoji: "`[a-z']*;?$"
      punct: "^/[0-9]?[a-z]*$"
      reverse_lookup: "`[a-z]*'?$"